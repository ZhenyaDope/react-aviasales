[{"/home/john/Рабочий стол/с винды/aviasales-react/src/index.js":"1","/home/john/Рабочий стол/с винды/aviasales-react/src/components/App/App.js":"2","/home/john/Рабочий стол/с винды/aviasales-react/src/components/Header/Header.jsx":"3","/home/john/Рабочий стол/с винды/aviasales-react/src/components/Main/Main.jsx":"4","/home/john/Рабочий стол/с винды/aviasales-react/src/components/Main/Content/Content.jsx":"5","/home/john/Рабочий стол/с винды/aviasales-react/src/components/Main/FilterTransfer/FilterTransfer.jsx":"6","/home/john/Рабочий стол/с винды/aviasales-react/src/components/Main/Content/FilterGroup/FilterGroup.jsx":"7","/home/john/Рабочий стол/с винды/aviasales-react/src/components/Main/Content/Tickets/Tickets.jsx":"8","/home/john/Рабочий стол/с винды/aviasales-react/src/components/Main/Content/Tickets/TicketItem/TicketItem.jsx":"9"},{"size":183,"mtime":1609623329519,"results":"10","hashOfConfig":"11"},{"size":4309,"mtime":1609927776924,"results":"12","hashOfConfig":"11"},{"size":351,"mtime":1608936828000,"results":"13","hashOfConfig":"11"},{"size":589,"mtime":1609715124326,"results":"14","hashOfConfig":"11"},{"size":516,"mtime":1609682404403,"results":"15","hashOfConfig":"11"},{"size":1393,"mtime":1609926327414,"results":"16","hashOfConfig":"11"},{"size":633,"mtime":1609714868273,"results":"17","hashOfConfig":"11"},{"size":1065,"mtime":1609840866187,"results":"18","hashOfConfig":"11"},{"size":4455,"mtime":1609926474021,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"82c132",{"filePath":"23","messages":"24","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"25","usedDeprecatedRules":"22"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/john/Рабочий стол/с винды/aviasales-react/src/index.js",[],["40","41"],"/home/john/Рабочий стол/с винды/aviasales-react/src/components/App/App.js",["42"],"import React, { useState, useEffect } from \"react\";\n\n// Components\nimport Header from \"../Header/Header\";\nimport Main from \"../Main/Main\";\n\n// Styles\nimport styles from \"./App.module.css\";\n\nfunction App() {\n  const SEARCH_ID_URL = \"https://front-test.beta.aviasales.ru/\";\n\n  // Билеты\n  const [tickets, setTickets] = useState([]);\n\n  // Флаг загрузки\n  const [loading, setLoading] = useState(true);\n\n  // Сортировка дешевые \\ быстрые\n  const [sortTickets, setSortTickets] = useState(\"price\");\n\n  // Фильтр по пересадкам\n  const [sortTransfer, setSortTransfer] = useState({\n    all: true,\n    noTransfer: true,\n    oneTransfer: true,\n    twoTransfer: true,\n    threeTransfer: true,\n  });\n\n  // Измение фильтра по количеству пересадок\n\n  const filterTransfer = (id) => {\n    const oldSortTransfer = { ...sortTransfer };\n    oldSortTransfer[id] = !oldSortTransfer[id];\n    setSortTransfer({ ...oldSortTransfer });\n  };\n\n  // Событие на изменение на филтрации\n  useEffect(() => {\n    filterTickets(tickets, sortTransfer);\n  }, [sortTransfer, tickets]);\n\n  // Фильтрация по количеству персадок\n  const filterTickets = (tickets, filterGroup) => {\n    // Добавление поля transfer\n    const modTickets = tickets.map((el) => {\n      const transfer =\n        el.segments[0].stops.length + el.segments[1].stops.length;\n\n      el.transfer = transfer;\n\n      return el;\n    });\n\n    //Соотношение имени к длине массива stops\n    const filters = {\n      all: tickets,\n      noTransfer: 0,\n      oneTransfer: 1,\n      twoTransfer: 2,\n      threeTransfer: 3,\n    };\n\n    const some = Object.entries(filterGroup).reduce((acc, cur) => {\n      const key = cur[0];\n      const value = cur[1];\n      return value ? [...acc, key] : [...acc];\n    }, []);\n\n    //Итоговый массив, с значениями, которые нужно вывести\n    const arrFilters = [];\n\n    for (const key in filters) {\n      if (some.includes(key)) {\n        arrFilters.push(filters[key]);\n      }\n    }\n\n    return filterGroup.all\n      ? tickets\n      : modTickets.filter((el) => arrFilters.includes(el.transfer));\n  };\n\n  // Запрос на сервер\n  const responseData = async (url) => {\n    // Получение ID\n    const responseID = await fetch(`${url}search/`);\n    const { searchId } = await responseID.json();\n    // Получение данных\n    const responseData = await fetch(\n      `${url}tickets?searchId=${searchId}`\n    ).then((data) => data.json());\n    return responseData;\n  };\n\n  // Получение данных при загрузке компонентов\n  useEffect(() => {\n    // Получение массива билетов\n    responseData(SEARCH_ID_URL)\n      .then(\n        (data) =>\n          setTickets(\n            ...tickets,\n            data.tickets\n              .slice(0, 10)\n              .sort(\n                (prevTicekt, nextTicket) => prevTicekt.price - nextTicket.price\n              )\n          ),\n        setLoading(false),\n        setSortTickets(\"price\")\n      )\n      .catch((e) => setLoading(true));\n  }, []);\n\n  // Фильтрация по длительности\n  const filterDuration = () => {\n    setSortTickets(\"fast\");\n\n    const data = [...tickets]\n      .map((ticket) => {\n        const [first, second] = ticket.segments;\n        return [ticket, first.duration + second.duration];\n      })\n      .sort((a, b) => a[1] - b[1])\n      .map((ticket) => ticket[0]);\n\n    setTickets(data);\n  };\n\n  // Фильтрация по цене\n  const filterPrice = () => {\n    setSortTickets(\"price\");\n    setTickets(\n      [...tickets].sort(\n        (prevTicekt, nextTicket) => prevTicekt.price - nextTicket.price\n      )\n    );\n  };\n\n  const visibleTickets = filterTickets(tickets, sortTransfer);\n\n  return (\n    <div className={styles.App}>\n      <Header />\n      <Main\n        filterTransfer={filterTransfer}\n        sortTransfer={sortTransfer}\n        filterPrice={filterPrice}\n        filterDuration={filterDuration}\n        sortPrice={sortTickets}\n        tickets={visibleTickets}\n        loading={loading}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","/home/john/Рабочий стол/с винды/aviasales-react/src/components/Header/Header.jsx",[],"/home/john/Рабочий стол/с винды/aviasales-react/src/components/Main/Main.jsx",[],"/home/john/Рабочий стол/с винды/aviasales-react/src/components/Main/Content/Content.jsx",[],"/home/john/Рабочий стол/с винды/aviasales-react/src/components/Main/FilterTransfer/FilterTransfer.jsx",[],"/home/john/Рабочий стол/с винды/aviasales-react/src/components/Main/Content/FilterGroup/FilterGroup.jsx",[],"/home/john/Рабочий стол/с винды/aviasales-react/src/components/Main/Content/Tickets/Tickets.jsx",[],"/home/john/Рабочий стол/с винды/aviasales-react/src/components/Main/Content/Tickets/TicketItem/TicketItem.jsx",[],{"ruleId":"43","replacedBy":"44"},{"ruleId":"45","replacedBy":"46"},{"ruleId":"47","severity":1,"message":"48","line":115,"column":6,"nodeType":"49","endLine":115,"endColumn":8,"suggestions":"50"},"no-native-reassign",["51"],"no-negated-in-lhs",["52"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'tickets'. Either include it or remove the dependency array. You can also do a functional update 'setTickets(t => ...)' if you only need 'tickets' in the 'setTickets' call.","ArrayExpression",["53"],"no-global-assign","no-unsafe-negation",{"desc":"54","fix":"55"},"Update the dependencies array to be: [tickets]",{"range":"56","text":"57"},[2916,2918],"[tickets]"]